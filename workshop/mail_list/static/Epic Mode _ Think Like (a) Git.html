<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US"><head profile="http://gmpg.org/xfn/11">

  <!-- Meta & Title -->
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="author" content="Sam Livingston-Gray">
  <title>Epic Mode // Think Like (a) Git</title>

  <!-- Puny humans! -->
  <link type="text/plain" rel="author" href="http://think-like-a-git.net/humans.txt">

  <!-- CSS -->
  <link type="text/css" rel="stylesheet" href="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/style.css" media="screen">
  <link type="text/css" rel="stylesheet" href="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/customizations.css" media="screen">

  <!-- Hooks -->
  <link rel="index" title="Vectors" href="#">

  <!-- Javascript -->
  <script src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/ga.js" async="" type="text/javascript"></script><script type="text/javascript" src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/jquery_002.js"></script>
  <script type="text/javascript" src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/jquery.js"></script>
  <script type="text/javascript" src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/superfish.js"></script>
  <script type="text/javascript" src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/jquery_003.js"></script>
  <script type="text/javascript" src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/custom.js"></script>

  <!-- Google Analytics -->
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-27154496-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>

</head>

<body>
  <div id="header">
    <div class="wrapper">

      <!-- Image Based Logo -->
      <!-- <h1><a href="index.html"><img src="/assets/images/logo.png" alt="Think Like (a) Git" /></a></h1> -->

      <!-- Static Logo (Optional) -->
      <h1 class="title"><a href="http://think-like-a-git.net/">Think Like (a) Git</a></h1>
      <h3 class="subtitle">A Guide for the Perplexed</h3>

      <div class="banner">
        <div class="cta">
          Follow <a href="https://twitter.com/#%21/thinklikeagit">@thinklikeagit</a>
          <br>for site updates!
        </div>
      </div>

    </div><!--#wrapper-->
  </div><!--#header-->

  <div id="nav-top">
    <div class="wrapper">

      <!-- Top Navigation Menu -->
      <ul class="menu-nav-top sf-js-enabled sf-shadow">
        <li class="first"><a href="http://think-like-a-git.net/">Home</a></li>
        <li class=""><a href="http://think-like-a-git.net/tldr.html">TL;DR</a></li>
        <li class=""><a>Read In...</a>
          <ul class="sf-js-enabled sf-shadow" style="display: none; visibility: hidden;">
            <li><a href="#about-this-site">AD/HD mode</a></li>
            <li><a href="http://think-like-a-git.net/epic.html">EPIC MODE</a></li>
          </ul>
        </li>
        <li class=""><a href="http://think-like-a-git.net/resources.html">Resources</a></li>
        <li class=""><a href="http://think-like-a-git.net/halp.html">HALP!</a></li>
        <li class=""><a href="http://think-like-a-git.net/changelog.html">Changelog</a></li>
        <li class=""><a href="http://think-like-a-git.net/todo.html">TODO</a></li>
      </ul>

      <!-- Top Social Links -->
      <ul class="social-links sf-js-enabled sf-shadow">
        <li><a href="mailto:geeksam@gmail.com" class="w-tooltip"><img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/icon_email.png" alt="Email"></a></li>
        <li><a href="http://twitter.com/geeksam" class="w-tooltip"><img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/icon_twitter.png" alt="Twitter"></a></li>
        <li><a href="#about-this-site/about-the-author" class="w-tooltip">?</a></li>
      </ul>

    </div><!--#wrapper-->
  </div><!--#nav-top-->




  <div class="wrapper">
    <div id="content" class="grid12 last">

      <div class="post page-content">
        <div class="entry-content">
          <!-- Primary content -->
          <div class="two_third">
            <p>  <a name="about-this-site"></a>
  </p><h1>About This Site</h1>
  <p>This site is organized in a fairly linear fashion, with two variants.</p><p></p>

<p>In <a href="http://think-like-a-git.net/sections/about-this-site.html">AD/HD mode</a>,
 each section will have links at the bottom to the previous and next 
section, so you can read through the site from beginning to end.  If you
 find that you're already familiar with some of the concepts in a given 
section, you can use the sidebar navigation to skip to specific pages.</p>




<p><strong><em>Keyboard junkies, you can also navigate between sections 
using the "N" and "P" keys, for (N)ext and (P)revious.  You can also use
 "J" and "K" (which probably makes less sense on non-QWERTY keyboards, 
but I can only do so much).</em></strong></p>




<p>In <a href="http://think-like-a-git.net/epic.html">EPIC MODE</a>, you get the whole enchilada on one page, and the sidebar navigation will jump you to headings within the page.</p>


<p>  <a name="who-this-site-is-for"></a>
  </p><h2>Who This Site Is For</h2>
  <p>"Advanced beginners" with Git.  You should know how to create a 
repository, add and commit files to it, and you should probably have 
some idea of why you might want to use a branch.</p><p></p>

<p>If you're still struggling with what version control software is for, this site may not be that useful to you.  <strong>I encourage you to poke around,</strong> but if you're not getting much out of it, check out my <a href="http://think-like-a-git.net/resources.html">resources page</a> for some pointers, and consider coming back to this site later.</p>




<p>On the other hand, if you can already do a <code class="inline">git rebase --interactive</code>
 without breaking a sweat, you may not get that much out of the site.  
(But I hope it gives you a framework for helping others learn!)  I 
encourage you to look over the <a href="http://think-like-a-git.net/resources.html">Resources</a>, and suggest any other links you've found that have helped you get to where you are now.</p>


<p>  <a name="what-this-site-will-try-to-teach-you"></a>
  </p><h2>What This Site Will Try to Teach You</h2>
  <p>My goal is to give you <strong>a simple strategy for safely experimenting</strong> with some of the features that make Git so insanely, awesomely useful.</p><p></p>

<p>In order to do that, I need to make sure you know at least a little tiny bit about <strong>graph theory.</strong>  <strong><em>Don't be intimidated by this!</em></strong>
  I hope you'll find, as I did, that graph theory just gives you a 
convenient place to hang a lot of concepts you're already familiar with.</p>




<p>Once I've introduced graph theory, I'll show you how it applies to Git, and I'll share with you what I call "the Git epiphany."</p>




<p>Finally, I'll explain the pattern I use to this day in working with Git repositories.</p>


<p>  <a name="why-this-site"></a>
  </p><h2>Why This Site?</h2>
  <p>I've been using Git since sometime in 2008.  I spent the first year
 or so flailing about and not really understanding what I was doing.  At
 some point, I realized something that helped me get a lot more 
comfortable using Git.  And, I started to formalize a pattern of 
interaction with Git that enabled me to increase my understanding and 
confidence in working with some of Git's more dangerous features.</p><p></p>

<p>I tried helping other people learn how to use Git, but I wasn't all 
that successful.  A friend of mine later told me that I'd told him 
something along the lines of "all Git commands are really just graph 
manipulation commands", but that didn't actually help him at all at the 
time.</p>




<p>So, in April 2011, I tried to put together what I knew into an hour-long talk.</p>




<p>This began life as a "Lunch and Learn" presentation to my coworkers. 
 Based on the positive feedback I got from that, I then gave the talk 
again at Portland BarCamp 2011, and again later at Cascadia RubyConf 
2011.  My slides are <a href="http://think-like-a-git.heroku.com/#63">on Heroku</a>.</p>




<p>(There's video of that talk <a href="http://confreaks.net/videos/612-cascadiaruby2011-think-like-a-git">here</a>,
 but keep in mind that I actually had zero warning that I was going to 
talk that day—the keynote speaker ran short, and the conference 
organizers asked if anybody there had had a talk proposal rejected, but 
had their slides ready to go.  I raised my hand, and three minutes later
 I was up on stage.)</p>




<p>Based on encouraging feedback from both of those talks, I wanted to 
turn the talk into a series of screencasts... but I thought writing it 
out would actually be a bit easier, and might be more accessible.  (I 
like screencasts for some things, but I also find it hard to set time 
aside to watch them.)  If you'd like to see screencasts based on this 
material, let me know.  My contact information is on the next page.</p>


<p>  <a name="about-the-author"></a>
  </p><h2>About the Author</h2>
  <p>This site was created by Sam Livingston-Gray.  I'm a software developer in Portland, Oregon.  I can be reached at <a mailto="geeksam@gmail.com">geeksam@gmail.com</a>.</p><p></p>

<p>You'll find more information at <a href="http://resume.livingston-gray.com/">my resume website</a>, and at <a href="http://github.com/geeksam/">GitHub</a>, <a href="http://www.linkedin.com/pub/sam-livingston-gray/1/568/504">LinkedIn</a>, and <a href="https://twitter.com/geeksam/">Twitter</a>.</p>


<p>  <a name="git-makes-more-sense-when-you-understand-x"></a>
  </p><h1>Git Makes More Sense When You Understand X</h1>
  <p>As I mentioned in <a href="http://think-like-a-git.net/sections/about-this-site/why-this-site.html">Why This Site?</a>,
 I once tried to help a friend learn Git by saying something that—he 
later told me—wasn't all that helpful.  After getting that feedback, I 
started noticing this pattern:</p><p></p>

<p><strong>People tend to say things like "Git makes more sense when you understand [...]".</strong></p>




<p>So I did a quick Google search for that phrase in April 2011, and it turned up over <strong>8 million results</strong>.  (Here,&nbsp;<a href="http://www.google.com/search?q=git+makes+more+sense+when+you+understand">try it yourself</a>.)</p>




<p>I've chosen a few examples of this pattern to talk about briefly.</p>


<p>  <a name="example-1-kent-beck"></a>
  </p><h2>Example 1: Kent Beck</h2>
  <p><img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/kent_beck_tweet.jpg" class="no-shadow"></p><p></p>

<p><strong>This is a perfect example of the form.</strong>  It sounds impressive, but unless you already know what the author is talking about, it doesn't really help.</p>




<div class="wp-caption" style="text-align: left; padding: 5px;">
  I like this tweet for another reason.  I've purchased and read several
 of Kent's books, and had assumed that he already knew everything there 
was to know.  When I saw this, and realized that I'd understood 
something before him, I was quite surprised. And then I was amused at 
having been surprised.
</div>


<p>  <a name="example-2-git-for-ages-4-and-up"></a>
  </p><h2>Example 2: Git for Ages 4 and Up</h2>
  <p>In <a href="http://2010.osdc.com.au/proposal/196/git-ages-4-and">Git for Ages 4 And Up</a> (OSDC, 2010), Michael Schwern uses Tinker Toys to teach the audience how Git works.</p><p></p>

<p>It's a brilliant talk by a brilliant developer, and if you have some 
time to watch the video, I highly recommend it.  But check out the very 
first sentence in the session description <em>(emphasis added)</em>:</p>




<blockquote><p><strong><em>Git makes so much more sense when you understand how it really works,</em></strong> because it's really a two trick pony.
<br> <br>
Tinker Toys are the best illustration of a Git repository I've found. 
Side-by-side with issuing Git commands, we'll build a Git repository out
 of kid's toys showing what's going on behind the scenes. Mind bending 
concepts like remote branching, rebase and the staging area become 
child's play.
<br> <br>
WARNING: CHOKING HAZARD - Small Parts. Not For Children Under 4 Years.</p></blockquote>


<p>  <a name="example-3-homeomorphic-endofunctors"></a>
  </p><h2>Example 3: Homeomorphic Endofunctors</h2>
  <p><img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/homeomorphic_endofunctors.jpg" class="no-shadow"></p><p></p>

<h3>Don't worry.  It's a joke.</h3>




<p>(At least, I'm pretty sure it's a joke.)</p>


<p>  <a name="example-4-lsd-and-chainsaws"></a>
  </p><h2>Example 4: LSD and Chainsaws</h2>
  <p>This one isn't strictly of the same pattern, but I think it still 
captures the overall theme that Git is powerful and strange, and must be
 meditated upon to achieve enlightenment:</p><p></p>

<blockquote><p>And then there’s <code class="inline">git rebase --interactive</code>, which is a bit like <br> <code class="inline">git commit --amend</code>
 hopped up on acid and holding a chainsaw–completely insane and quite 
dangerous but capable of exposing entirely new states of mind."</p></blockquote>




<p>-Ryan Tomayko, <a href="http://tomayko.com/writings/the-thing-about-git">The Thing About Git</a>, April 2008</p>


<p>  <a name="the-internet-talks-back"></a>
  </p><h2>The Internet Talks Back!</h2>
  <p>I was just about to leave for work when I ran across this tweet, and had to immortalize it here:</p><p></p>

<p><img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/jammycakes-tweet.png" class="no-shadow"></p>




<p>Okay, now back to your regularly scheduled Git education...</p>


<p>  <a name="graph-theory"></a>
  </p><h1>Graph Theory</h1>
  <p><strong>[If you're already comfortable with graph theory, skip ahead to <a href="http://think-like-a-git.net/sections/graph-theory/reachability.html">Reachability</a>.]</strong></p><p></p>

<p>For a rather math-intensive introduction to graph theory, <a href="http://en.wikipedia.org/wiki/Graph_theory">see Wikipedia</a>.  Here's a very short version of the definition they use there:</p>




<blockquote><p>A graph refers to a collection of nodes and a collection of edges that connect pairs of nodes.</p></blockquote>




<p>Graph theory can be used to describe a lot of things, but I'll start 
off with one of the most straightforward examples:  maps.  You can think
 of graph theory as a way of encoding information about two aspects of a
 map:  <strong>places to go, and ways to get there.</strong></p>




<p>Let's start at the very beginning, shall we?</p>




<p><em>[By the way:  as important human inventions go, I happen to think
 graph theory is right up there alongside bacon and indoor plumbing.  It
 takes some time to really sink in, though, so <strong>if you find your eyes glazing over in this section, don't worry about it</strong>.  As long as the page about <a href="http://think-like-a-git.net/sections/graph-theory/reachability.html">reachability</a> makes sense to you, you can come back and reread these pages later.]</em></p>


<p>  <a name="seven-bridges-of-konigsberg"></a>
  </p><h2>Seven Bridges of Königsberg</h2>
  <p>Here's a drawing of the city of Königsberg, Prussia in the early 18th century.</p><p></p>

<div class="wp-caption">
  <img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/bridges_of_konigsberg.jpg" class="no-shadow">
  <br><strong>A lovely place for a stroll...</strong>
</div>




<p>The city was set on both sides of the Pregel River <em>(shown in blue)</em>, and included two large islands which were connected to each other and the mainland by seven bridges <em>(shown in red)</em>.  Someone had posed the question of whether it was possible to walk through the city and <strong>cross every bridge exactly once</strong>.</p>




<p>In 1735, a mathematician named <a href="http://en.wikipedia.org/wiki/Leonhard_Euler">Leonhard Euler</a>
 proved that such a route could not exist.  In doing so, he basically 
invented a field of mathematics, which we now call graph theory.</p>




<p><em>("Euler" is pronounced more or less like "oiler", by the way.)</em></p>


<p>  <a name="places-to-go-and-ways-to-get-there"></a>
  </p><h2>Places To Go, and Ways to Get There</h2>
  <p>Here are two versions of the Königsberg map.  On the left is a 
smaller version of the map you've already seen, and on the right is the 
version Euler used in his 1735 proof.</p><p></p>

<div class="fl wp-caption">
  <img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/bridges_of_konigsberg-cropped.jpg" class="no-shadow">
  <br><strong>Traditional map</strong>
</div>




<div class="fl wp-caption pad-left">
  <img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/konigsberg-graph-unlabeled.png" class="no-shadow">
  <br><strong>Euler's version</strong>
</div>




<div class="clear"></div>




<p>Here's what I think is so mind-bendingly cool about this:  <strong>Euler threw away all the information that didn't matter to the problem.</strong></p>




<div class="fr pad-left"><img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/whoa.png" class="no-shadow"></div>




<p>If all you're concerned with is which bridges you cross, then for all intents and purposes, <strong>each land mass can be represented by a point</strong>, and <strong>each bridge is just a line between two points</strong>.</p>




<p>Which is why I say you can think of graph theory as the study of <strong>places to go, and ways to get there.</strong></p>


<p>  <a name="nodes-and-edges"></a>
  </p><h2>Nodes and Edges</h2>
  <p>In the previous page, I said graph theory boils down to <strong>places to go, and ways to get there.</strong>  Let's have another look at the definition I used earlier.</p><p></p>

<blockquote><p>A graph refers to a collection of <strong>nodes</strong> and a collection of <strong>edges</strong> that connect pairs of nodes.</p></blockquote>




<p><strong>Nodes:</strong>  Places to be <br>
<strong>Edges:</strong>  Ways to get there</p>




<p>In the Königsberg example, the land masses and islands are nodes, and the bridges are edges.</p>




<div class="fl wp-caption">
  <img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/bridges_of_konigsberg-cropped.jpg" class="no-shadow">
  <br><strong>Traditional map</strong>
</div>




<div class="fl wp-caption pad-left">
  <img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/konigsberg-graph-unlabeled.png" class="no-shadow">
  <br><strong>Euler's version</strong>
</div>




<div class="clear"></div>


<p>  <a name="attaching-labels-to-nodes"></a>
  </p><h2>Attaching Labels to Nodes</h2>
  <p>While mathematicians may be perfectly content to consider graphs 
only according to their shapes, most programmers and computer scientists
 tend to use them to compute some kind of meaningful results.</p><p></p>

<p>As such, it's often useful to label the nodes in a graph in some way.  For example, here in lovely Portland, Oregon, <strong>we love us some <a href="http://trimet.org/">public transit</a>.</strong>  We've got <a href="http://trimet.org/bus/index.htm">buses</a>, <a href="http://trimet.org/max/index.htm">light rail</a>, <a href="http://trimet.org/wes/index.htm">commuter rail</a>, <a href="http://trimet.org/streetcar/index.htm">streetcars</a>, and even an <a href="http://www.portlandtram.org/fares.htm">aerial tram</a>.</p>




<p>Here's a quick overview of just our light rail system.  This doesn't show all the stops—pardon me, <em>nodes</em>—it's
 just the transfer points and end stations for each line.  The nodes 
have labels that make them mean something to humans, but as far as a 
computer is concerned, they could just be called "01100010".</p>




<div class="wp-caption">
  <img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/max-system-map.gif" class="no-shadow">
  <br><strong>Portland's light rail: the 10,000-foot view</strong>
</div>




<p>...and if, right about now, you're starting to open your mouth and 
say, "hey, why are those lines different colors?"  Then you, my friend, 
are on the right track.  (No pun intended.)</p>


<p>  <a name="attaching-labels-to-edges"></a>
  </p><h2>Attaching Labels to Edges</h2>
  <p>Just as we can label the nodes in a graph, we can also attach information to the edges.  This might include:</p><p></p>

<ul class="full-size">
  <li><strong>Names</strong>—for example, "12th Avenue".</li>
  <li><strong>Numbers (also called "weights")</strong>—like distances or speeds.</li>
  <li><strong>Types</strong>—to denote relationships, like "friend" or "coworker" or "parent of".</li>
  <li><strong>Direction</strong>—in the previous example, relationships like "friend" and "coworker" are bidirectional, but "parent of" only goes one way <em>(unless, possibly, you're a character in a Robert A. Heinlein novel)</em>.</li>
</ul>




<div class="wp-caption">
  <img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/social_network.jpg" class="no-shadow">
  <br><strong>A social network. Quick, someone give me $50 million in venture capital!</strong>
</div>




<p>In fact, that last point about directionality is so important that it deserves its own page.</p>


<p>  <a name="directed-versus-undirected-graphs"></a>
  </p><h2>Directed Versus Undirected Graphs</h2><p></p>

<div class="fl wp-caption pad-right">
  <img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/undirected-graph.png" class="no-shadow">
  <br><strong>Undirected graph</strong>
  <br><em>(no arrows)</em>
</div>




<p>One of the key distinctions people make between graphs is whether they are <strong>directed</strong> or <strong>undirected</strong>.
  I'll admit, when I talk about undirected graphs, I sometimes get a 
mental image of a subway system map just sitting there aimlessly on the 
couch while its parents just sigh and ask when it's going to take 
responsibility and do something with its life...</p>




<div class="fr wp-caption pad-left">
  <img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/directed-graph.png" class="no-shadow">
  <br><strong>Directed graph</strong>
  <br><em>(note the arrows)</em>
</div>




<p>...but that's just me.  Really, <strong>all we're saying is whether the edges in a graph are bidirectional or not.</strong></p>




<p>Most, but not all, graphs I've seen have only one kind of edge.  
There are a few cases where you might want to use both—for example, a 
street map might have undirected edges for two-way streets and directed 
edges for downtown—but that's the only example I can think of off the 
top of my head.</p>


<p>  <a name="reachability"></a>
  </p><h2>Reachability</h2>
  <p><strong>You can think of this graph as a set of three parallel universes</strong> with time flowing from left to right, so that <strong>A</strong> is the beginning of recorded history.  <em>(The arrow represents the "follows" or "is subsequent to" relationship, so you might say that "B follows A".)</em></p><p></p>

<div class="fl wp-caption pad-right">
  <img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/reachability-example.png" class="no-shadow">
  <br>To see an ASCII version of this graph, type
  <br><code class="inline">git rebase --help</code>
</div>




<p>If you start from <strong>E</strong>, the history you'll see is <strong>A,&nbsp;B,&nbsp;C,&nbsp;D,&nbsp;E</strong>.</p>




<p>If you start from <strong>H</strong>, the history you'll see is <strong>A,&nbsp;B,&nbsp;F,&nbsp;G,&nbsp;H</strong>.</p>




<p>If you start from <strong>K</strong>, the history you'll see is <strong>A,&nbsp;B,&nbsp;C,&nbsp;I,&nbsp;J,&nbsp;K</strong>.</p>




<p>But the really important thing about this is that no matter which node you start with, <strong>some parts of the graph will be unreachable to you.</strong>  That sounds kind of pessimistic, so I'll turn it around:  <strong>Depending on where you start, you can reach parts of the graph that you couldn't get to otherwise.</strong></p>




<p>This may not sound like much, but stay with me for a little while longer—it's huge.</p>


<p>  <a name="graphs-and-git"></a>
  </p><h1>Graphs and Git</h1>
  <p>The reason I've gone on at some length about graph theory is that a Git repository is one giant graph.</p><p></p>

<div class="fr wp-caption pad-left">
  <img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/graphs-and-git.png" class="no-shadow">
  <br><strong>Git commits (simplified view)</strong>
</div>




<p>Most of the time when you interact with Git, you're working with 
commits in one way or another.  At the surface level, a Git commit 
consists of two things:  (1) a pointer to the state of your code at some
 moment in time, and (2) zero or more pointers to "parent" commits.</p>




<p><em>(Hint:  <strong>the word "pointer" means you're probably talking about a graph.</strong>)</em></p>




<p><strong>A Git commit is a node in a graph</strong>, and nodes can point to other nodes that came before them.</p>




<div class="wp-caption" style="text-align: left; padding: 5px;">
  By the way:  if you want to learn way more about this than any sane human should ever know, I highly recommend Scott Chacon's <a href="http://peepcode.com/products/git-internals-pdf">"Git Internals" PDF</a>.  Or, for that matter, any of Scott Chacon's talks.  Scott's knowledge of Git is... impressive.
</div>


<p>  <a name="visualizing-your-git-repository"></a>
  </p><h2>Visualizing Your Git Repository</h2>
  <p>About half of my interactions with Git take place on the command line.  But <strong>when I want to understand what's going on, I use a visual Git tool.</strong>  On the Mac, the best thing I've found is <strong><a href="http://gitx.frim.nl/">GitX</a></strong>.  On other systems, <strong>gitk</strong> should be available; you can search the web to find something that works for you.</p><p></p>

<p>The main point of using a visualizer is to <strong>help you make sense of your branch history.</strong>  For example, to list all commits in your repository at the command line, you could do <code class="inline">git log --oneline --abbrev-commit --branches=*</code>—which will get you this flattened view:</p>




<p><strong><em>(Thanks to <a href="https://twitter.com/#%21/cflipse">@cflipse</a> for pointing out that <code class="inline">--pretty=oneline</code> could be shortened to <code class="inline">--oneline</code>!)</em></strong></p>




<div class="wp-caption">
  <img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/textual-git-log.png" class="no-shadow">
  <br><strong>Clear as mud, right?</strong>
</div>




<div class="clear"></div>




<p>Or, you can add <code class="inline">--graph</code> to that command, which will show you a <em>slightly more useful</em> view:</p>




<p><code>git log --oneline --abbrev-commit --branches=* --graph</code></p>




<div class="wp-caption">
  <img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/textual-git-graph.png" class="no-shadow">
  <br><strong>Much better!</strong>
</div>




<div class="clear"></div>




<p><strong><em>(Thanks to <a href="https://twitter.com/#%21/mjdominus">@mjdominus</a> and <a href="https://twitter.com/#%21/JRGarcia">@JRGarcia</a> for reminding me about the <code class="inline">--graph</code> option!)</em></strong></p>




<p>If you want to see branch and tag labels, add <code class="inline">--decorate</code>:</p>




<p><code>git log --oneline --abbrev-commit --branches=* --graph --decorate</code></p>




<div class="wp-caption">
  <img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/textual-git-graph-with-labels.png" class="no-shadow">
  <br><strong>I'm going to need a wider design template if this goes on...</strong>
</div>




<div class="clear"></div>




<p><strong><em>(Thanks again to <a href="https://twitter.com/#%21/JRGarcia">@JRGarcia</a> for the <code class="inline">--decorate</code> tip!)</em></strong></p>




<p>You can also add <code class="inline">--color</code> to pretty up the display a bit more <em>(sorry, no time to take a screenshot as I add this)</em>:</p>




<p><code>git log --oneline --abbrev-commit --branches=* --graph --decorate --color</code></p>




<p>And, in fact, I have a shell alias that does all of this:</p>




<p><code>alias gg='git log --oneline --abbrev-commit --branches=* --graph --decorate --color'</code></p>




<p>Or, you can use GitX to see all of the above in a cleaner graphical view:</p>




<div class="wp-caption">
  <img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/gitx-visualization.png" class="no-shadow">
  <br><strong>I like the purdy colors.</strong>
</div>


<p>  <a name="references"></a>
  </p><h2>References</h2>
  <p>You may have noticed the <em>very colorful</em> labels in the GitX 
screenshot on the previous page. (If not, go back and have another peek.
 I'll wait.)  Those labels are GitX's way of showing <strong>references.</strong></p><p></p>

<p>I don't want to spend too much time talking about what each color 
means, because that particular representation is specific to GitX and 
you might be using something else.  But however your visualizer 
represents them, you need to know what they are.  <em>(Can I get a drumroll, please?)</em></p>




<p><strong>References are pointers to commits.</strong></p>




<p>References come in several flavors:  <strong>local branch,</strong> <strong>remote branch,</strong> and <strong>tag.</strong></p>




<p>On disk, a <strong><em>local branch reference</em></strong> consists 
entirely of a file in your project's .git/refs/heads directory.  This 
file contains the 40-byte identifier of the commit that the reference 
points to... and that's it.  <strong>The entire file is 40 bytes.</strong></p>




<p>You might have heard people talk about how Git allows "cheap 
branching."  This is (part of) what they mean.  Creating a branch in Git
 just means writing 40 bytes to disk, which is why <code class="inline">git branch foo</code> is so freaking fast.</p>




<p>What's <strong><em>really</em></strong> interesting about references, though, is how they behave.  So, let's move on.</p>


<p>  <a name="the-reference-reference"></a>
  </p><h2>The Reference Reference</h2>
  <p>As previously mentioned there are a few different kinds of 
references, and they all point to commits in your repository.  The only 
difference between them is how and when they move.  (When I say that a 
reference moves, I mean that the ID of the commit that it points to is 
updated.)</p><p></p>

<p><strong>Local branch references</strong> are specific to a single repository:  your local one.  Commands that affect local branch references include
  <code class="inline">commit</code>,
  <code class="inline">merge</code>,
  <code class="inline">rebase</code>, and
  <code class="inline">reset</code>.</p>




<p><strong>Remote branch references</strong> are also specific to a 
single repository, but one that's previously been defined as a remote.  
Commands that affect remote branch references include
  <code class="inline">fetch</code> and
  <code class="inline">push</code>.</p>




<p><strong>Tag references</strong> are basically like branch references that never move.  <strong>Once you've created a tag, it will never change</strong> (unless you explicitly update it using the <code class="inline">--force</code>
 option).  This behavior makes them useful for marking specific versions
 of a software package, or marking exactly what got deployed to a 
production server on a particular date.  As of this writing, I only know
 of one command that affects tags.  As you might guess, it's
  <code class="inline">tag</code>.</p>


<p>  <a name="making-sense-of-the-display"></a>
  </p><h2>Making Sense of the Display</h2>
  <p>Here's another look at that GitX screenshot, with a few annotations.</p><p></p>

<div class="wp-caption">
  <img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/gitx-visualization-annotated.png" class="no-shadow">
  <br><strong>If you want a dummy repo to play around with, <a href="https://github.com/geeksam/do-re-mi">clone this one</a>.</strong>
</div>




<p>The important thing to know about this, though, isn't what you see here.  It's what you <strong>don't</strong> see.  Every Git tool I've ever seen shares one thing in common:  <strong>they hide commits from you</strong>.</p>




<p>Sounds like a conspiracy theory, right?  Not really.</p>


<p>  <a name="garbage-collection"></a>
  </p><h2>Garbage Collection</h2>
  <p>Imagine this scenario:  you write some code and check it in.  Then,
 you realize you forgot to run the tests, so you run them, and they 
uncover a syntax error.  Or you spot a typo.  For whatever reason, you 
weren't done when you thought you were done.  <em>(I do this All. The. Time.)</em></p><p></p>

<p>Back when I used Subversion, the only thing to be done about this was
 to add the new change in another commit.  Often, I'd wind up with three
 or four versions in my history.  The first one would say "add feature 
X", and the next several would have messages like "oops, found typo" or 
"bugfix" or "forgot to run tests".</p>




<p>Git gives you another option:  you can tack the new change on to the previous commit using <code class="inline">git commit --amend</code>.
  This keeps all of your related changes bundled together in one commit,
 so you can understand it more quickly when you're reviewing it later.</p>




<p>Here's another interesting fact about Git commits:  a commit's ID is a <a href="http://en.wikipedia.org/wiki/SHA-1">SHA-1 hash</a> of several pieces of information:  the contents of the commit, <strong>and the IDs of its parent commits.</strong></p>




<p>Which means that, when you use <code class="inline">git commit --amend</code>, you're actually building a completely different commit, and pointing your local branch reference to it instead.  <strong>The first commit you made is still there on disk, and you can still get back to it</strong> (more on this later).  However, in the interest of not cluttering up your view, neither <code class="inline">git log</code> nor your Git visualizer will show it to you.</p>




<p>Eventually, Git will decide that it's time to run <a href="http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29#Reachability_of_an_object">garbage collection</a>.  (You can trigger this process yourself, using <code class="inline">git gc</code>.)
  Starting from every branch and every tag, Git walks back through the 
graph, building a list of every commit it can reach.  Once it's reached 
the end of every path, it deletes all the commits it didn't visit.</p>


<p>  <a name="experimenting-with-git"></a>
  </p><h1>Experimenting With Git</h1>
  <p>I said something really important on the previous page.  It's so important I'll repeat it.</p><p></p>

<p>In describing Git's garbage collection algorithm, I said, <strong>"Starting from every branch and every tag</strong>, Git walks back through the graph, building a list of every commit it can reach."  <em>(Emphasis added.)</em></p>




<p>Everything I've written up to this point has been to provide the background for you to <strong>understand this one thing.</strong>  If I had ten seconds to tell you The Secret Of Git, the entire point of this site, I can fit it into these four words:</p>




<h3>References make commits reachable.</h3>


<p>  <a name="references-make-commits-reachable"></a>
  </p><h2>References Make Commits Reachable</h2>
  <p>Let's unpack that sentence.</p><p></p>

<h3>References...</h3>




<p>...whether they are local branches, remote branches, or tags <em>(see <a href="http://think-like-a-git.net/sections/graphs-and-git/the-reference-reference.html">here</a>)</em>...</p>




<h3>...make commits...</h3>




<p>...which are nodes in a graph <em>(see <a href="http://think-like-a-git.net/sections/graphs-and-git.html">here</a>)</em>...</p>




<h3>...reachable.</h3>




<p>...so that you can get back to them <em>(see <a href="http://think-like-a-git.net/sections/graph-theory/reachability.html">here</a>)</em>, and Git won't delete them when it decides it's time for spring cleaning <em>(see <a href="http://think-like-a-git.net/sections/graphs-and-git/garbage-collection.html">here</a>)</em>.</p>




<p>It took me a really long time to piece this together for myself.  I'm
 writing this site so that you don't have to waste the time I did.</p>


<p>  <a name="my-humble-beginnings"></a>
  </p><h2>My Humble Beginnings</h2>
  <p>When I first started using Git, I was really paranoid about losing code.  The only <abbr title="Version Control System">VCS</abbr>
 I'd used before that was Subversion, where branching is this arcane 
thing that causes all kinds of trouble.  So I didn't have a lot of 
practice with merging -- let alone rebasing, which everyone said was 
really dangerous.  (Remember <a href="http://think-like-a-git.net/sections/git-makes-more-sense-when-you-understand-x/example-4-lsd-and-chainsaws.html">LSD and chainsaws</a>?)</p><p></p>

<p>So, before I tried something I was a little uncertain about, <strong>I would back up <em>the entire directory.</em></strong></p>




<p><code>
  $ cd ..<br>
  $ cp -r work backup_work<br>
  $ cd work
</code></p>




<p>Then I'd do the merge, or rebase, or whatever it was that I thought 
was tricky.  If it looked like it worked, I'd continue on; if not, I'd 
delete the working directory, rename the old one, and try something 
else.</p>




<p>I don't have records, but I'm pretty sure <strong>I did this for at least my first year of working with Git.</strong></p>




<p>When I finally realized that <a href="http://think-like-a-git.net/sections/experimenting-with-git/references-make-commits-reachable.html">references make commits reachable</a>,
 I (a) felt very dumb for all those times I backed up the repository, 
and (b) developed a much faster strategy for getting my repository back 
to a known state.</p>


<p>  <a name="branches-as-savepoints"></a>
  </p><h2>Branches as Savepoints</h2>
  <p>Because a Git branch is just a 40-byte file on disk, <strong>it takes orders of magnitude more time for you to tell the computer to create a branch</strong> (by typing <code class="inline">git branch foo</code>) <strong>than for your computer to actually do it.</strong></p><p></p>

<p>And because branches are references, and <em>(say it with me now)</em> <a href="http://think-like-a-git.net/sections/experimenting-with-git/references-make-commits-reachable.html">references make commits reachable</a>, <strong>creating a branch is a way to "nail down" part of the graph</strong> that you might want to come back to later.</p>




<p>And because neither <code class="inline">git merge</code> nor <code class="inline">git rebase</code> will change your existing commits (<a href="http://think-like-a-git.net/sections/graphs-and-git/garbage-collection.html">remember</a>, a commit's ID is a hash of its contents <strong><em>and its history</em></strong>), you can create a temporary branch any time you want to try something you're even just a little bit unsure about.</p>




<p>In other words, creating a branch is like saving your game before you battle the boss.</p>


<p>  <a name="use-your-targeting-computer-luke"></a>
  </p><h2>Use Your Targeting Computer, Luke</h2>
  <p>I use GitX in almost every coding session.  GitX behaves like a web browser in one very important way:  <strong>it won't immediately reflect changes to your repository</strong>—you have to hit <strong>Cmd+R</strong> to tell it to <strong>(R)</strong>efresh its view.</p><p></p>

<div class="fr wp-caption pad-left">
  <a href="http://store.xkcd.com/xkcd/#StandBackScience"><img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/xkcd-try-science.png" class="no-shadow"></a>
  <br><strong>It's a great shirt. You know you want one.</strong>
</div>




<p>You can use this to your advantage.  Here's how:  <strong>when you've done something on the command line,</strong> switch back to your visualizer, but <strong>don't refresh right away.</strong>  Instead, try to predict how what you did will change its view.  <em>(You can even try drawing out the graph on an index card.)</em>  Then, refresh the visualizer and ask yourself:  <strong>did it change in the way you expected?</strong></p>




<p><strong>If the answer is YES:</strong>  Congratulations!  You just learned something!</p>




<p><strong>If the answer is NO:</strong>  Congratulations!  You're about to learn something!</p>




<p>Repeat this process several thousand times, and eventually you won't need to refer to the visualizer as often.  <em>(For those of you who like bad sci-fi movies, think of it as less "Use the force, Luke" and more <strong>"Usul no longer needs the weirding module."</strong>)</em></p>


<p>  <a name="testing-out-merges"></a>
  </p><h1>Testing Out Merges</h1>
  <p>These days, I sling branches around without really thinking much 
about it.  But the first few times I tried using different branches to 
develop features, it was a bit nerve-wracking.  If that's where you are,
 what follows are two simple recipes that should help you play around 
with <code class="inline">git merge</code> until you understand exactly what it does.</p><p></p>

<p>I've put together two slight variations on the same operation.  Both 
techniques basically do the same thing, but one of them relies on a 
slightly scarier-sounding Git command for the undo.</p>




<p>You might prefer one or the other based on how uncertain you 
are—about either your Git skills, or the specific merge you're about to 
try.</p>




<ul class="full-size">
  <li>
    Use <a href="http://think-like-a-git.net/sections/testing-out-merges/the-scout-pattern.html">the Scout pattern</a> if you're still unclear on exactly what <code class="inline">git merge</code> does, or if you think it's likely that you'll decide to back out of the merge.
  </li>
  <li>
    Use <a href="http://think-like-a-git.net/sections/testing-out-merges/the-savepoint-pattern.html">the Savepoint pattern</a> if you're pretty sure what you want to do, but just want to leave yourself an undo button in case things get too messy.
  </li>
</ul>


<p>  <a name="the-scout-pattern"></a>
  </p><h2>The Scout Pattern</h2>
  <p>Here's a quick overview of the steps in this recipe:</p><p></p>

<ol class="full-size">
  <li>Make sure you're on the right branch and that you have a clean working state.</li>
  <li>Create a new branch (I often name it <em>test_merge</em>) and switch to it.</li>
  <li>Do the merge.</li>
  <li>Switch to your visualizer and predict how its view will change when you refresh it.</li>
  <li>Refresh your visualizer and see whether your prediction was correct.</li>
  <li>Are you happy with the result?
    <ul>
      <li>If YES: Move your real branch forward to where the <em>test_merge</em> branch is.</li>
      <li>If NO: Delete the <em>test_merge</em> branch.</li>
    </ul>
  </li>
</ol>




<p>I call this the Scout pattern:  you're unsure what the terrain ahead 
is like, so you send a scouting party ahead to check it out.  If they 
radio back that everything's okay, you'll move ahead and join them.  If 
not, well, it was just a small scouting party and we'll tell the 
families that they died with honor...</p>




<h3>The long version</h3>




<p>You're on the <strong><em>master</em></strong> branch and you want the changes from the <strong><em>spiffy_new_feature</em></strong> branch to be incorporated into <strong><em>master.</em></strong>
  You're not sure if this will be a good idea, so you want to try out 
the merge, but be able to abort it if things don't go smoothly.</p>




<ol>
  <li>
    <strong>Make sure you're on the right branch and that you have a clean working state.</strong>
    <ul>
      <li>
        Whatever visualizer you're using, figure out how it shows you 
where your current branch is.  Or, at the command line, type <code class="inline">git status</code> and you should see something like this:
        <code>
          # On branch master <br>
          nothing to commit (working directory clean)
        </code>
      </li>
    </ul>
  </li>
  <li>
    <strong>Create a new branch and switch to it.</strong>
    <ul>
      <li>
        Type <code class="inline">git checkout -b test_merge</code>.  Now, if you type <code class="inline">git status</code> again, you should see a message that you're on the <em><strong>test_merge</strong></em> branch.
      </li>
    </ul>
  </li>
  <li>
    <strong>Do the merge.</strong>
    <ul>
      <li>
        Type <code class="inline">git merge spiffy_new_feature</code>.  If you're lucky, there won't be any merge conflicts you can't resolve.
      </li>
      <li><strong>If you want to abort the merge</strong> at this point, type <code class="inline">git reset --hard</code>.</li>
    </ul>
  </li>
  <li>
    <strong>Switch to your visualizer and predict how its view will change when you refresh it.</strong>
    <ul>
      <li>
        For example:
        <ol>
          <li>After a merge, you should see a new commit.</li>
          <li>The new commit should have a message like "Merge branch 'spiffy_new_feature' into master".</li>
          <li>Your <em><strong>test_merge</strong></em> branch label should have moved to this new commit, while the <em><strong>master</strong></em> and <em><strong>spiffy_new_feature</strong></em> branch labels should still be in the same place.</li>
        </ol>
      </li>
    </ul>
  </li>
  <li>
    <strong>Refresh your visualizer and see whether your prediction was correct.</strong>
  </li>
  <li>
    <strong>Are you happy with the result?</strong>
    <ul>
      <li>
        <strong>If YES:</strong> Move the <em>master</em> branch forward to where the <em>test_merge</em> branch is with:
        <code>git checkout master <br>git merge test_merge</code>
      </li>
      <li>
        <strong>If NO:</strong> Drop the <em>test_merge</em> branch with:
        <code>git checkout master <br>git branch -D test_merge</code>
      </li>
    </ul>
  </li>
</ol>


<p>  <a name="the-savepoint-pattern"></a>
  </p><h2>The Savepoint Pattern</h2>
  <p>Here's a quick overview of the steps in this recipe:</p><p></p>

<ol class="full-size">
  <li>Make sure you're on the right branch and that you have a clean working state.</li>
  <li>Create a new branch to use as a savepoint, but don't switch to it.</li>
  <li>Do the merge.</li>
  <li>Switch to your visualizer and predict how its view will change when you refresh it.</li>
  <li>Refresh your visualizer and see whether your prediction was correct.</li>
  <li>Are you happy with the result?
    <ul>
      <li>If YES: Delete the savepoint.</li>
      <li>If NO: Reset your branch to the savepoint.</li>
    </ul>
  </li>
</ol>




<p>(Unless the last video game you ever played was Super Mario Brothers,
 it should be obvious why I call this one the Savepoint pattern.)</p>




<h3>The long version</h3>




<p>You're on the <strong><em>master</em></strong> branch and you want the changes from the <strong><em>spiffy_new_feature</em></strong> branch to be incorporated into <strong><em>master.</em></strong>
  You're reasonably confident that you'll want to keep the changes, but 
you want to be able to abort it if, for example, this feature has 
unintended side effects.</p>




<ol>
  <li>
    <strong>Make sure you're on the right branch and that you have a clean working state.</strong>
    </li><li>
      Whatever visualizer you're using, figure out how it shows you 
where your current branch is.  Or, at the command line, type <code class="inline">git status</code> and you should see something like this:
      <code>
        # On branch master <br>
        nothing to commit (working directory clean)
      </code>
    </li>
  
  <li>
    <strong>Create a new branch to use as a savepoint, but don't switch to it.</strong>
    <ul>
      <li>
        Type <code class="inline">git branch savepoint</code>.  Now, if you type <code class="inline">git status</code> again, you should still see a message that you're on the <em><strong>master</strong></em> branch.
      </li>
    </ul>
  </li>
  <li>
    <strong>Do the merge.</strong>
    <ul>
      <li>
        Type <code class="inline">git merge spiffy_new_feature</code>.  If you're lucky, there won't be any merge conflicts you can't resolve.
      </li>
      <li><strong>If you want to abort the merge</strong> at this point, just type <code class="inline">git reset --hard</code>.</li>
    </ul>
  </li>
  <li>
    <strong>Switch to your visualizer and predict how its view will change when you refresh it.</strong>
    <ul>
      <li>
        For example:
        <ol>
          <li>After a merge, you should see a new commit.</li>
          <li>The new commit should have a message like "Merge branch 'spiffy_new_feature' into master".</li>
          <li>Your <em><strong>master</strong></em> branch label should have moved to this new commit, while the <em><strong>spiffy_new_feature</strong></em> branch label should still be in the same place.</li>
        </ol>
      </li>
    </ul>
  </li>
  <li>
    <strong>Refresh your visualizer and see whether your prediction was correct.</strong>
  </li>
  <li>
    Are you happy with the result?
    <ul>
      <li>
        <strong>If YES:</strong> Delete the savepoint.
        <code>git branch -d savepoint</code>
      </li>
      <li>
        <strong>If NO:</strong> Reset your branch to the savepoint.
        <code>git reset --hard savepoint</code>
        If you want to clean up, you can now delete the savepoint with <code class="inline">git branch -d savepoint</code>.
      </li>
    </ul>
  </li>
</ol>


<p>  <a name="black-belt-merging"></a>
  </p><h2>Black Belt Merging</h2>
  <p>Once you're comfortable with <a href="http://think-like-a-git.net/sections/testing-out-merges/the-savepoint-pattern.html">the Savepoint pattern</a>,
 you might get tired of creating the savepoint branch, only to have to 
remember to delete it every time.  If so, I have good news for you:  you
 don't actually need to use a branch as a savepoint for merges.</p><p></p>

<p>Merge commits always wind up with a branch label pointing at them, 
and one of the branch's parent commits will be the commit that that 
branch label was just moved from.</p>




<p>It may take you a few tries to parse that sentence.  The upshot is 
that the commit you started on—the one you would've marked with a 
savepoint branch—<strong>will always be reachable.</strong></p>




<p>Here's the thing:  <strong>Git doesn't care what you call your branches.</strong>
  Remember, branches are just a 40-byte file on disk that points to the 
commit's SHA-1 hash, which is what Git really uses for all of its work. 
 The branch is just there for us puny humans to have some convenient, 
memorable name pointing to part of the graph.</p>




<p>At the end of <a href="http://think-like-a-git.net/sections/testing-out-merges/the-savepoint-pattern.html">the Savepoint pattern</a>, the command you type to reset your branch to the savepoint is <code class="inline">git reset --hard savepoint</code> (where "savepoint" is a branch name).  If you look at the documentation that comes up when you type <code class="inline">git reset -h</code>, you'll see that the final argument it takes is called <code class="inline">&lt;commit&gt;</code>.  Older versions of the documentation called this <code class="inline">&lt;commit-ish&gt;</code>, which was a convenient reminder that you could use anything that Git can turn into a SHA-1 hash.</p>




<p>Things Git is happy to accept in a <code class="inline">&lt;commit&gt;</code> argument include (but are probably not limited to):</p>




<ul class="full-size">
  <li>Branch names</li>
  <li>Tags</li>
  <li>Relative references like <strong>HEAD^</strong>, <strong>HEAD^^</strong>, or <strong>HEAD~3</strong></li>
  <li>partial SHA-1 hashes like 8d434382 (you just have to provide 
enough initial digits to be unique; Git will fill in the rest for you)</li>
  <li>SHA-1 hashes like 8d434382d9420940be260199a8a058cf468d9037 (these are <em>very</em> easy for Git to turn into SHA-1 hashes!)</li>
</ul>




<p>So, at the end of <a href="http://think-like-a-git.net/sections/testing-out-merges/the-savepoint-pattern.html">the Savepoint pattern</a>, if you wanted to back out of the merge, you could just as easily use <code class="inline">git log</code> or your visualizer to find the SHA-1 of the commit (let's say it starts with 1234abcd), and type this:</p>




<p><code>git reset --hard 1234abcd</code></p>




<p>...and <strong>Git would behave exactly the same</strong> as if you'd remembered to create a branch in the first place.</p>




<div class="wp-caption" style="text-align: left; padding: 5px;">
  That bit about "if you'd remembered to" reminds me:  one of the single
 most helpful bits of commentary I ever read about Git was Ryan 
Tomayko's <a href="http://tomayko.com/writings/the-thing-about-git">The Thing About Git</a>.  (Yes, that's the same thing I linked to in <a href="http://think-like-a-git.net/sections/git-makes-more-sense-when-you-understand-x/example-4-lsd-and-chainsaws.html">LSD and Chainsaws</a>.)
</div>


<p>  <a name="rebase-from-the-ground-up"></a>
  </p><h1>Rebase From the Ground Up</h1>
  <p>Git's <code class="inline">rebase</code> command was one of those 
things that it took me forever to figure out.  This was partly because I
 just had a lot to learn about managing branches in general, but it was 
also partly because it seemed like the only time people bothered to 
write about rebase was to say <a href="http://think-like-a-git.net/sections/git-makes-more-sense-when-you-understand-x/example-4-lsd-and-chainsaws.html">how incredibly weird and dangerous it was</a>.</p><p></p>

<p>This is a damn shame, because <strong>rebase is the single most useful command I use in Git</strong>.  More importantly, <strong>it's actually pretty easy to understand once you get the hang of it.</strong></p>




<h3>Danger, Will Robinson!</h3>




<p>I've tried to demystify rebase in this section, and I do plan to 
write up a strategy for experimenting with rebase, just as I have with 
merge.  However, I recently realized that I forgot to mention something 
very important about rebase:  <strong>it is generally considered rude to rewrite history in public!</strong>  I hope to write more on this soon.</p>




<div class="wp-caption" style="text-align: left; padding: 5px;">
<strong>NOTE:</strong> Many of the questions I've received so far have 
had to do with rebase.  I have a lot more to say on this topic, but 
finding the time to sit down and write has been rather difficult.  For 
now, <a href="http://johnwilger.com/blog/2011/01/08/production-release-workflow-with-git/">this writeup of the workflow my team has been using for over a year</a> may help shed some light.
</div>




<br>




<h3>End of Public Service Announcement.</h3>




<p>With that said, I'm going to take a brief digression, because I think
 it's much easier to explain rebase in the context of another Git 
command:  <code class="inline">git cherry-pick</code>.</p>


<p>  <a name="cherry-picking-explained"></a>
  </p><h2>Cherry-Picking Explained</h2>
  <p>Git's own online help has a great, if characteristically terse, description of what the command does:</p><p></p>

<blockquote><p>Given one or more existing commits, apply the change each one introduces, recording a new commit for each.</p></blockquote>




<p>I've already mentioned (back on the page about <a href="http://think-like-a-git.net/sections/graphs-and-git/garbage-collection.html">garbage collection</a>)
 that a Git commit's ID is a hash of both its contents and its history. 
 So, even if you have two commits that introduce the exact same change, 
if they point to different parent commits, they'll have different IDs.</p>




<p>What <code class="inline">git cherry-pick</code> does, basically, is 
take a commit from somewhere else, and "play it back" wherever you are 
right now.  Because this introduces the same change with a different 
parent, Git builds a new commit with a different ID.</p>




<p>Let's go back to this example from the <a href="http://think-like-a-git.net/sections/graph-theory/reachability.html">reachability</a> section:</p>




<div class="wp-caption">
  <img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/reachability-example.png" class="no-shadow">
</div>




<p>If you were at node H in this graph, and you typed <code class="inline">git cherry-pick E</code> <em>(yes,
 you'd actually type part or all of the SHA for the commit, but for 
simplicity's sake, I'll just use the labels that are already here)</em>, you'd wind up with a copy of commit E—let's call it "E prime" or <strong>E'</strong>—that pointed to <strong>H</strong> as its parent, like so:</p>




<div class="wp-caption">
  <img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/cherry-pick-example-1.png" class="no-shadow">
</div>




<p>Or, if you typed something like <code class="inline">git cherry-pick C D E</code>, you'd wind up with this when you were done:</p>




<div class="wp-caption">
  <img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/cherry-pick-example-2.png" class="no-shadow">
</div>




<p>The important thing to notice here is that Git has copied changes made in one place, and replayed them somewhere else.</p>




<p>Here's a quick slideshow that steps through the process:</p>




<!-- Making up for my lack of Javascript skills with Ruby instead -->




<div class="wp-caption">
      <div id="cherry-pick-slideshow-slide-1" class="cherry-pick-slideshow-slide" style="text-align: left; display: block;">
      <img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/cherry-pick-step-1.png" class="no-shadow">
      <div style="text-align: center;">
        Step 1
        <br>
        <button disabled="disabled" onclick="show_slide('cherry-pick-slideshow', 1);">←←</button>
        <button disabled="disabled" onclick="show_slide('cherry-pick-slideshow', 0);">←</button>
        <button onclick="show_slide('cherry-pick-slideshow', 2);">→</button>
        <button onclick="show_slide('cherry-pick-slideshow', 7);">→→</button>
      </div>
    </div>
      <div id="cherry-pick-slideshow-slide-2" class="cherry-pick-slideshow-slide" style="text-align: left; display: none;">
      <img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/cherry-pick-step-2.png" class="no-shadow">
      <div style="text-align: center;">
        Step 2
        <br>
        <button onclick="show_slide('cherry-pick-slideshow', 1);">←←</button>
        <button onclick="show_slide('cherry-pick-slideshow', 1);">←</button>
        <button onclick="show_slide('cherry-pick-slideshow', 3);">→</button>
        <button onclick="show_slide('cherry-pick-slideshow', 7);">→→</button>
      </div>
    </div>
      <div id="cherry-pick-slideshow-slide-3" class="cherry-pick-slideshow-slide" style="text-align: left; display: none;">
      <img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/cherry-pick-step-3.png" class="no-shadow">
      <div style="text-align: center;">
        Step 3
        <br>
        <button onclick="show_slide('cherry-pick-slideshow', 1);">←←</button>
        <button onclick="show_slide('cherry-pick-slideshow', 2);">←</button>
        <button onclick="show_slide('cherry-pick-slideshow', 4);">→</button>
        <button onclick="show_slide('cherry-pick-slideshow', 7);">→→</button>
      </div>
    </div>
      <div id="cherry-pick-slideshow-slide-4" class="cherry-pick-slideshow-slide" style="text-align: left; display: none;">
      <img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/cherry-pick-step-4.png" class="no-shadow">
      <div style="text-align: center;">
        Step 4
        <br>
        <button onclick="show_slide('cherry-pick-slideshow', 1);">←←</button>
        <button onclick="show_slide('cherry-pick-slideshow', 3);">←</button>
        <button onclick="show_slide('cherry-pick-slideshow', 5);">→</button>
        <button onclick="show_slide('cherry-pick-slideshow', 7);">→→</button>
      </div>
    </div>
      <div id="cherry-pick-slideshow-slide-5" class="cherry-pick-slideshow-slide" style="text-align: left; display: none;">
      <img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/cherry-pick-step-5.png" class="no-shadow">
      <div style="text-align: center;">
        Step 5
        <br>
        <button onclick="show_slide('cherry-pick-slideshow', 1);">←←</button>
        <button onclick="show_slide('cherry-pick-slideshow', 4);">←</button>
        <button onclick="show_slide('cherry-pick-slideshow', 6);">→</button>
        <button onclick="show_slide('cherry-pick-slideshow', 7);">→→</button>
      </div>
    </div>
      <div id="cherry-pick-slideshow-slide-6" class="cherry-pick-slideshow-slide" style="text-align: left; display: none;">
      <img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/cherry-pick-step-6.png" class="no-shadow">
      <div style="text-align: center;">
        Step 6
        <br>
        <button onclick="show_slide('cherry-pick-slideshow', 1);">←←</button>
        <button onclick="show_slide('cherry-pick-slideshow', 5);">←</button>
        <button onclick="show_slide('cherry-pick-slideshow', 7);">→</button>
        <button onclick="show_slide('cherry-pick-slideshow', 7);">→→</button>
      </div>
    </div>
      <div id="cherry-pick-slideshow-slide-7" class="cherry-pick-slideshow-slide" style="text-align: left; display: none;">
      <img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/cherry-pick-step-7.png" class="no-shadow">
      <div style="text-align: center;">
        Step 7
        <br>
        <button onclick="show_slide('cherry-pick-slideshow', 1);">←←</button>
        <button onclick="show_slide('cherry-pick-slideshow', 6);">←</button>
        <button disabled="disabled" onclick="show_slide('cherry-pick-slideshow', 8);">→</button>
        <button disabled="disabled" onclick="show_slide('cherry-pick-slideshow', 7);">→→</button>
      </div>
    </div>
  </div>




<script type="text/javascript" charset="utf-8">
  function show_slide(slideshow, index) {
    $('.'+slideshow+'-slide').hide();
    $('#'+slideshow+'-slide-' + index).show();
  }
  $(document).ready(function() {
    show_slide('cherry-pick-slideshow', 1);
  })
</script>


<p>  <a name="using-git-cherry-pick-to-simulate-git-rebase"></a>
  </p><h2>Using 'git cherry-pick' to Simulate 'git rebase'</h2>
  <p>Once you have <code class="inline">git cherry-pick</code> down, you can start off by thinking of <code class="inline">git rebase</code>
 as being a faster way to cherry-pick all of the commits in a given 
branch at once, rather than having to type out their IDs separately.</p><p></p>

<p><em>(That's only the very beginning of what rebase can do, but I'll write the rest of this section another time.)</em></p>




<p>Let's go back to our trusty example, but this time add some branches...</p>




<div class="wp-caption">
  <img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/before-rebase.png" class="no-shadow">
</div>




<p>Now, I could type this sequence of commands:</p>




<p><code>
  git checkout foo<br>
  git checkout -b newbar<br>
  git cherry-pick C D E
</code></p>




<p>In order, these commands:</p>




<ul class="full-size">
  <li>make sure we're at <strong>H</strong> <em>(because 'foo' points to it)</em>,</li>
  <li>create <strong>and check out</strong> a temporary branch called "newbar", also pointing at <strong>H</strong>,</li>
  <li>apply the changes from <strong>C</strong>, <strong>D</strong>, and <strong>E</strong>, creating new commits <strong>C'</strong>, <strong>D'</strong>, and <strong>E'</strong>, and update the "newbar" branch so it points at <strong>E'</strong>.</li>
</ul>




<p>Which would give me a repository that looked like this:</p>




<div class="wp-caption">
  <img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/cherry-pick-qua-rebase-example-midpoint.png" class="no-shadow">
</div>




<p>Then, I could type this:</p>




<p><code>
  git checkout bar <br>
  git reset --hard newbar <br>
  git branch -d newbar
</code></p>




<p>Which would:</p>




<ul class="full-size">
  <li>Switch to the branch called "bar",</li>
  <li>Forcibly move the "bar" branch pointer so that it pointed to the 
same place as the "newbar" branch (and, thanks to the --hard flag, 
update my working directory to match the new location), and</li>
  <li>Delete the temporary "newbar" branch.</li>
</ul>




<p>And leave my repository looking like this <em>(note that the original <strong>D</strong> and <strong>E</strong> nodes are no longer reachable, because no branch points to them)
</em>:</p>




<div class="wp-caption">
  <img src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/cherry-pick-qua-rebase-example-endpoint.png" class="no-shadow">
</div>




<p><strong>Or,</strong> I could have accomplished all that by typing this instead:</p>




<p><code>git rebase foo bar</code></p>




<p>In other words, 'git rebase' (in this form) is a shortcut that lets 
you pick up entire sections of a repository and move them somewhere 
else.</p>


<p>  <a name="a-helpful-mnemonic-for-git-rebase-arguments"></a>
  </p><h2>A Helpful Mnemonic for 'git rebase' Arguments</h2>
  <p>To summarize the previous section, this:</p><p></p>

<p><code>
  git checkout foo<br>
  git checkout -b newbar<br>
  git cherry-pick C D E <br>
  git checkout bar <br>
  git reset --hard newbar <br>
  git branch -d newbar
</code></p>




<p>is equivalent to this:</p>




<p><code>
  git rebase foo bar
</code></p>




<p>When you do a rebase, you are <strong><em>rewriting history.</em></strong>
  You are, in effect, saying to Git, "Hey, you know those things that 
happened over there on that completely different timeline?  I want you 
to pretend that they happened here instead."</p>




<p>The documentation for the rebase command lists a lot of different 
ways you can invoke it.  Frankly, I'm still not sure what some of them 
do, and I have a hard time parsing out the different parentheses and 
brackets to figure out exactly how you'd use, for example, <code class="inline">--onto</code>.</p>




<p>Here's how I think of it:  in English, we read <strong>from left to right</strong>.  On most charts that show the change in something over time, time is shown on the x-axis of the graph, with time increasing <strong>from left to right</strong>.  When you issue commands to the shell, you can put several of them on one line, and they'll be executed in order <strong>from left to right</strong>.</p>




<p>So when I use <code class="inline">git rebase</code>, I <em>(almost)</em>
 always give it two arguments:  the name of the place I want to start 
from, and the name of the place I want to end up.  Or, to put it another
 way, I tell rebase the sequence of events I want it to create, <strong>from left to right</strong>:  <code class="inline">git rebase first_this then_this</code></p>


<p>  <a name="the-end"></a>
  </p><h1>The End</h1><p></p>

<blockquote style="font-size: 1.1em; line-height: 1.2em;">Where do we go from here?<br>
Where do we go from here?<br>
The battle's done, and we kind of won<br>
So we sound our victory cheer<br>
Where do we go from here?<br><br>
<strong>–Buffy the Vampire Slayer, "Once More, With Feeling"</strong>
</blockquote>




<p>Technically, this isn't the end—this is just all I've written so far.
  I hope you've enjoyed reading this, and I really hope I've been able 
to help you learn something.</p>




<p><strong>I welcome your feedback!</strong>  Feel free to drop me an <a href="mailto:geeksam@gmail.com">email</a> or a <a href="https://twitter.com/#%21/geeksam">tweet</a> and let me know what you think.</p>




<p>If there are areas of Git that you'd like to understand better, speak
 up!  I've been motivated to write this much because I gave one 
presentation three times, and kept hearing from people that it really 
helped them.  I'm happy to add more to this site as I have time, but 
that's much more likely if you let me know that you're paying attention,
 and tell me what you want to see.</p>




<p>Happy hacking!<br>
-Sam</p>




          </div>

          <!-- Sidebar with site map -->
          <div class="one_third last">
            <ul>
<li><a href="#about-this-site">About This Site</a></li>
<ul>
<li><a href="#about-this-site/who-this-site-is-for">Who This Site Is For</a></li>
<li><a href="#about-this-site/what-this-site-will-try-to-teach-you">What This Site Will Try to Teach You</a></li>
<li><a href="#about-this-site/why-this-site">Why This Site?</a></li>
<li><a href="#about-this-site/about-the-author">About the Author</a></li>
</ul>
<li><a href="#git-makes-more-sense-when-you-understand-x">Git Makes More Sense When You Understand X</a></li>
<ul>
<li><a href="#git-makes-more-sense-when-you-understand-x/example-1-kent-beck">Example 1: Kent Beck</a></li>
<li><a href="#git-makes-more-sense-when-you-understand-x/example-2-git-for-ages-4-and-up">Example 2: Git for Ages 4 and Up</a></li>
<li><a href="#git-makes-more-sense-when-you-understand-x/example-3-homeomorphic-endofunctors">Example 3: Homeomorphic Endofunctors</a></li>
<li><a href="#git-makes-more-sense-when-you-understand-x/example-4-lsd-and-chainsaws">Example 4: LSD and Chainsaws</a></li>
<li><a href="#git-makes-more-sense-when-you-understand-x/the-internet-talks-back">The Internet Talks Back!</a></li>
</ul>
<li><a href="#graph-theory">Graph Theory</a></li>
<ul>
<li><a href="#graph-theory/seven-bridges-of-konigsberg">Seven Bridges of Königsberg</a></li>
<li><a href="#graph-theory/places-to-go-and-ways-to-get-there">Places To Go, and Ways to Get There</a></li>
<li><a href="#graph-theory/nodes-and-edges">Nodes and Edges</a></li>
<li><a href="#graph-theory/attaching-labels-to-nodes">Attaching Labels to Nodes</a></li>
<li><a href="#graph-theory/attaching-labels-to-edges">Attaching Labels to Edges</a></li>
<li><a href="#graph-theory/directed-versus-undirected-graphs">Directed Versus Undirected Graphs</a></li>
<li><a href="#graph-theory/reachability">Reachability</a></li>
</ul>
<li><a href="#graphs-and-git">Graphs and Git</a></li>
<ul>
<li><a href="#graphs-and-git/visualizing-your-git-repository">Visualizing Your Git Repository</a></li>
<li><a href="#graphs-and-git/references">References</a></li>
<li><a href="#graphs-and-git/the-reference-reference">The Reference Reference</a></li>
<li><a href="#graphs-and-git/making-sense-of-the-display">Making Sense of the Display</a></li>
<li><a href="#graphs-and-git/garbage-collection">Garbage Collection</a></li>
</ul>
<li><a href="#experimenting-with-git">Experimenting With Git</a></li>
<ul>
<li><a href="#experimenting-with-git/references-make-commits-reachable">References Make Commits Reachable</a></li>
<li><a href="#experimenting-with-git/my-humble-beginnings">My Humble Beginnings</a></li>
<li><a href="#experimenting-with-git/branches-as-savepoints">Branches as Savepoints</a></li>
<li><a href="#experimenting-with-git/use-your-targeting-computer-luke">Use Your Targeting Computer, Luke</a></li>
</ul>
<li><a href="#testing-out-merges">Testing Out Merges</a></li>
<ul>
<li><a href="#testing-out-merges/the-scout-pattern">The Scout Pattern</a></li>
<li><a href="#testing-out-merges/the-savepoint-pattern">The Savepoint Pattern</a></li>
<li><a href="#testing-out-merges/black-belt-merging">Black Belt Merging</a></li>
</ul>
<li><a href="#rebase-from-the-ground-up">Rebase From the Ground Up</a></li>
<ul>
<li><a href="#rebase-from-the-ground-up/cherry-picking-explained">Cherry-Picking Explained</a></li>
<li><a href="#rebase-from-the-ground-up/using-git-cherry-pick-to-simulate-git-rebase">Using 'git cherry-pick' to Simulate 'git rebase'</a></li>
<li><a href="#rebase-from-the-ground-up/a-helpful-mnemonic-for-git-rebase-arguments">A Helpful Mnemonic for 'git rebase' Arguments</a></li>
</ul>
<li><a href="#the-end">The End</a></li>
</ul>
          </div>
        </div>
      </div>
    </div><!--#content-->

    <div class="clear"></div>
  </div><!--wrapper-->

  <div id="footer" class="container">
    <div class="wrapper">
      

      <!-- Footer Copyright -->
      <p>
        <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/"><img alt="Creative Commons License" style="border-width:0" src="Epic%20Mode%20_%20Think%20Like%20%28a%29%20Git_files/cc-license-80x15.png"></a><br>
        <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type">Think Like (a) Git</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://think-like-a-git.net/" property="cc:attributionName" rel="cc:attributionURL">Sam Livingston-Gray</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>.
      </p>
      <p><br>Original template © 2011 <span>·</span> Vectors Community Theme <span>·</span> All Rights Reserved</p>
      <div class="clear"></div>

    </div><!--wrapper-->
  </div><!--footer-->



<div id="tiptip_holder" style="max-width:200px;"><div id="tiptip_arrow"><div id="tiptip_arrow_inner"></div></div><div id="tiptip_content"></div></div></body></html>